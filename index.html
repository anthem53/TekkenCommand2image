<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>translateTitle</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">


</head>
<body class=""  style="background-color:#F0F3BD;">
    
    <div class='d-flex justify-content-center'>
        <div class='flex-column  justify-content-center' style="text-align:center;">
            <h1 class=""> 커맨드 표를 이미지로 만드는 곳 </h1>
            <form class="mb-3">
                <p><textarea cols="50" rows="10" id="commandInput">rp</textarea></p>
                <button type="button" class="btn btn-outline-dark" onclick="drawImage()">이미지로 변환 </button>
                <button type="button" class="btn btn-outline-dark" onclick="downloadAll()">다운로드 </button>
            </form>
            <!-- <button type="button" class="btn btn-outline-primary" onclick="addImage1()">버튼1 </button>
            <button type="button" class="btn btn-outline-primary" onclick="addImage2()">버튼2 </button> -->
            <div  class="h2 pb-3" style="border-bottom: 5px dashed gray; " > 결과</div>
            <div id="result" class="mt-3"></div>
        

            <div id="resultList">
                <div class="input-group mb-3">
                    <span class="input-group-text" id="basic-addon1">@</span>
                    <div id="result2">  </div>
                  </div>

            </div>
            
            
            <div id="result">

            </div>
            
        </div>
    <script> 
        
        let a = ' '

        if (isNaN(' ') == false){
            console.log("TEST Sucesss")
        }
        else{
            console.log("TEST Fail")
        }

        let tempResult = document.getElementById("result");
        let commandInput = document.getElementById('commandInput')
        console.log("TEST")
        
        function downloadAl2(){
            console.log("downLoadAll")
            html2canvas(document.getElementById('result'), {
                useCORS: true, // 다른사이트의 리소스가있을때활성화(그러나...Access-Control-Allow-Origin 필요)
                onrendered: function(canvas) {
                canvas.toBlob(function(blob) {
                    console.log(blob)
                    const a = document.createElement("a")
                    a.href = canvas.toDataURL();
                    a.download = "check.png"
                    a.click()
                    a.remove()
                    //saveAs(blob, 'download.png');
                });
                
                // $("#test").html('<img src=' + canvas.toDataURL("image/png") + '>');
            }
        });

        }

        function downloadAll(){
            console.log("downLoadAll2")
            
            html2canvas(document.querySelector("#result"),
                        {allowTaint: true,
                        logging: true,
                        useCORS:true,
                        }).then(canvas => {
                document.body.appendChild(canvas)

                let image = canvas.toDataURL("image/png");
                image.crossOrigin = 'anonymous';

                const link = document.createElement("a");
                link.href = image;
                link.download = "paintJS.png";
                link.click();
                

            });

        }
    
    </script>
    <script src="./js/html2canvas.min1.4.1.js" type="text/javascript"></script>
    <script src="js/commandImage.js" type="text/javascript"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>

</body>


</html>